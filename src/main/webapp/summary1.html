<html>

<head>
    <title>
        Pratilipi Summary Page
    </title>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.1/knockout-min.js"></script>
    <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">  -->

    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.red-light_blue.min.css" />
    <link rel="stylesheet" href="pwa-stylesheets/css/styles.css?28" />
    <link rel="stylesheet" href="pwa-stylesheets/css/styles-new.css?28" />


	<script src="dialog-polyfill.js"></script>
	<link rel="stylesheet" type="text/css" href="dialog-polyfill.css" />    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<script>   
    	<#include "summary-components.ftl">
    </script>
    <script>
    function convertDate( date ) {
		var d = new Date( date );
		function day(d) { return (d < 10) ? '0' + d : d; }
		function month(m) { var months = ['${ _strings.month_jan }','${ _strings.month_feb }','${ _strings.month_mar }',
		                                  '${ _strings.month_apr }','${ _strings.month_may }','${ _strings.month_jun }',
		                                  '${ _strings.month_jul }','${ _strings.month_aug }','${ _strings.month_sep }',
		                                  '${ _strings.month_oct }','${ _strings.month_nov }','${ _strings.month_dec }']; 
		                                  return months[m]; }
		return [ day( d.getDate() ), month( d.getMonth() ), d.getFullYear() ].join(' ');
	}
    var HttpUtil = function() {
		function formatParams( params ) {
			if( params == null ) return "";
			return "?" + Object.keys( params ).map( function(key) { return key + "=" + params[key] }).join("&");
		}
		this.get = function( aUrl, params, aCallback ) {
			var anHttpRequest = new XMLHttpRequest();
			anHttpRequest.onreadystatechange = function() { 
				if( anHttpRequest.readyState == 4 ) {
					/* console.log( anHttpRequest.getResponseHeader( 'content-type' ) ); */
					aCallback( anHttpRequest.responseText, anHttpRequest.status );
				}
			};
			anHttpRequest.open( "GET", aUrl + formatParams( params ), true );            
	        anHttpRequest.send( null );
		};
	}
    </script>
</head>

<body>
    <!-- http://10.ptlp.co/pratilipi/cover?width=150 -->
    <div class="demo-layout-transparent mdl-layout mdl-js-layout mdl-layout--fixed-header">
	    <header class="mdl-layout__header mdl-layout__header--transparent pratilipi-header">
	    	<!-- ko component: {
				name: "pratilipi-header",
				params: { initialText: "Hello, world!", otherParam: 123 }
			} -->
			<!-- /ko -->
	    </header> 
		<div class="mdl-layout__drawer mdl-layout--small-screen-only">
			<!-- ko component: "pratilipi-navigation-drawer" --><!-- /ko -->
		</div>
				
        <main class="mdl-layout__content">
        	<div class="mdl-components mdl-js-components">
				<pratilipi-navigation-aside class="mdl-layout--large-screen-only mdl-card-border white-background"></pratilipi-navigation-aside>
	            <div class="mdl-grid">

					<pratilipi-info params="{ isGuest: userIsGuest }"></pratilipi-info>	
					
					<pratilipi-review-list params="{ isGuest: userIsGuest }"></pratilipi-review-list>    	                                                       
            	</div>
            </div>

            <pratilipi-footer></pratilipi-footer>
        </main>

    </div>


    <script src="https://code.getmdl.io/1.3.0/material.min.js"></script>  
    <script src="summary.js?5"></script>
</body>
</html>
