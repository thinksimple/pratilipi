<!DOCTYPE html>
<html>
<head>
    <title>
        Pratilipi Summary Page
    </title>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.1/knockout-min.js"></script>
    <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">  -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.red-light_blue.min.css" />
    <link rel="stylesheet" href="/pwa-stylesheets/css-minified/styles.css?7" />
    <link href="/pwa-stylesheets/css-minified/svg-sprite-av.css?1" rel="stylesheet"> 
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<script>   
    	


	ko.components.register('pratilipi-header', {
	viewModel: function() {
   var self = this;
   this.languageList = [
       { value: "TAMIL", text:  "தமிழ்"},
       { value: "MALAYALAM", text: "മലയാളം"},
       { value: "MARATHI", text: "मराठी"},
       { value: "BENGALI", text:  "বাংলা"},
       { value: "HINDI", text:  "हिंदी"},
       { value: "GUJARATI", text:  "ગુજરાતી"},
       { value: "TELUGU", text:  "తెలుగు"},
       { value: "KANNADA", text: "ಕನ್ನಡ"}
   ];
   this.currentLanguage = ko.observable( "HINDI" );
   this.searchQuery = ko.observable();
   
   this.languageChangeHandler = function() {
     /* change this to current url */
       window.location = ( "http://" + this.currentLanguage() + ".pratilipi.com" );
   };
   
   this.search = function( formElement ) {
       if( self.searchQuery() && self.searchQuery().trim().length ) {
           var search_url = "/search?q=" + self.searchQuery();
           window.location.href = search_url;        
       }

   };
},
    template: '<header class="mdl-layout__header mdl-layout__header--transparent">    <div class="secondary-500" id="header-card">        <div class="parent-container">            <div class="vertical-align container">                <div class="pratilipi-logo">                    <a href="/">                        <div class="sprites-icon pratilipi-logo-icon"></div>                    </a>                </div>                <div class="pratilipi-text">                    <select data-bind="options: languageList,                       value: currentLanguage,                       optionsText: function(item) { return item.text },                       optionsValue: function(item) { return item.value },                       event:{ change: languageChangeHandler }" class="form-control focus-outline-none" id="select-language" style="box-shadow:none;padding:0px;border:none;color: #d0021b;height:30px;font-size: 18px;width: auto;">                    </select>                </div>                <div class="search-bar">                    <form action="javascript:void(0);" data-bind="submit: search" style="margin-bottom: 0;">                        <button style="position: absolute;top: 10%;right: 0;z-index: 1;cursor: pointer;" class="mdl-button mdl-js-button mdl-button--icon">                        	<div class="sprites-icon header-sprite-icon search-sprite-icon" ></div>                        </button>                        <div class="sprites-icon header-sprite-icon menu-search-sprite-icon" style="position: absolute;top: 15%;z-index: 1;"></div>                        <input class="form-control horizontal-form-input focus-outline-none" placeholder="Search for stories" data-bind="textInput: searchQuery">                    </form>                </div>                <div class="button-holder menu-icon">                    <a on-click="_openMenuNavigation">                        <div class="sprites-icon header-sprite-icon menu-sprite-icon"></div>                    </a>                </div>                <div class="button-holder">                    <a href="/">                        <div class="sprites-icon header-sprite-icon edit-icon"></div>                    </a>                </div>                <div class="button-holder">                    <a href="/">                        <div class="sprites-icon header-sprite-icon library-books-icon"></div>                    </a>                </div>                <div class="button-holder">                    <a href="/">                        <div class="sprites-icon header-sprite-icon notifications-icon"></div>                    </a>                </div>                <div class="sign-in-button button-inside-container">                    <button class="btn btn-primary">                        <!-- <iron-icon icon="social:person"></iron-icon> -->                        <div class="sprites-icon header-sprite-icon account-circle-icon"></div>                        <span>Sign in kijiye</span>                    </button>                </div>                <div class="button-holder sign-in-text">                    <!-- <template is="dom-if" if="{{ isGuest }}"> -->                    <a on-click="_logIn">                        <div class="sprites-icon header-sprite-icon account-circle-icon"></div>                    </a>                </div>            </div>            <div class="sign-in-button button-outside-container" style="margin: 7px auto;">                <button class="btn btn-primary">                    <!-- <iron-icon icon="social:person"></iron-icon> -->                    <div class="sprites-icon header-sprite-icon account-circle-icon"></div>                    <span>Sign in kijiye</span>                </button>            </div>        </div>    </div>    <div class="pratilipi-search-bar visible-xs">        <div class="flex-container">            <div class="" style="cursor: pointer;padding-top: 0;align-self: center;position: relative;">                <select data-bind="options: languageList,                       value: currentLanguage,                       optionsText: function(item) { return item.text },                       optionsValue: function(item) { return item.value },                       event:{ change: languageChangeHandler }" class="form-control focus-outline-none" id="select-language" style="box-shadow:none;padding:0px;border:none;color: #d0021b;height:30px;font-size: 18px;">                </select>            </div>            <form data-bind="submit: search" action="javascript:void(0);" on-keyup="onSubmit" style="position: relative;margin-bottom: 8px;flex-grow: 1;margin-left: 4px;margin-right: 8px;">                <button style="position: absolute;top: 10%;right: 0;z-index: 1;cursor: pointer;" class="mdl-button mdl-js-button mdl-button--icon">                	<div class="sprites-icon header-sprite-icon search-sprite-icon" style="position: absolute;top: 15%;right: 0;z-index: 1;"></div>                </button>                <input class="form-control horizontal-form-input focus-outline-none" placeholder="Search for stories" data-bind="textInput: searchQuery">            </form>        </div>    </div></header>'

});

ko.components.register('pratilipi-footer', {
    template: '<!-- <footer class="mdl-mini-footer">    <div class="paper-card">        <div class="parent-container">            <div class="mdl-grid pratilipi-footer padding-zero" style="">                <div class="mdl-cell mdl-cell--7-col mdl-cell--8-col-tablet mdl-cell--4-col-phone margin-zero padding-15" style="padding: 4px;">                    <a class="link" href="mailto:hindi@pratilipi.com"> hindi@pratilipi.com </a> &nbsp;&nbsp;                    <a class="link" href="tel:+918604623871"> +91 8604623871</a>                </div>                <div class="mdl-cell mdl-cell--5-col mdl-cell--8-col-tablet mdl-cell--4-col-phone margin-zero padding-15">                    सोशल मीडिया पर हमें फोलो करें&nbsp;                    <div class="footer-icon-holder">                        <a href="https://www.facebook.com/Pratilipidotcom/" target="_blank"><span class="sprites-icon footer-sprite-icon fb-black-icon"></span></a>                        <a href="https://twitter.com/TeamPratilipi" target="_blank"><span class="sprites-icon footer-sprite-icon twitter-black-icon"></span></a>                        <a href="https://plus.google.com/+PratilipiTeam" target="_blank"><span class="sprites-icon footer-sprite-icon gplus-black-icon"></span></a>                        <a href="https://www.linkedin.com/company/pratilipi" target="_blank"><span class="sprites-icon footer-sprite-icon linked-in-black-icon"></span></a>                    </div>                </div>            </div>        </div>    </div>    <div style="margin-top: 12px;    width: 100%;" class="margin-top-bottom padding-left-right pratilipi-footer">        <div class="mdl-grid padding-zero">            <div class="mdl-cell mdl-cell--9-col mdl-cell--8-col-tablet mdl-cell--4-col-phone margin-zero static-links padding-15">                <span><a class="link" href="/about/pratilipi">हमारे बारे में </a></span>                <span><a class="link" href="/work-with-us">हमारे साथ काम करें </a></span>                <span><a class="link" href="/privacy-policy">गोपनीयता नीति </a></span>                <span><a class="link" href="/terms-of-service">सेवा की शर्तें</a></span>            </div>            <div class="mdl-cell mdl-cell--3-col mdl-cell--8-col-tablet mdl-cell--4-col-phone margin-zero padding-15">                <span class="link">&copy;&nbsp;2015-2016 Nasadiya Tech. Pvt. Ltd.</span>            </div>        </div>    </div></footer>  --> <footer class="mdl-mega-footer">        <div class="mdl-mega-footer__middle-section">        <div class="mdl-mega-footer__drop-down-section">            <input class="mdl-mega-footer__heading-checkbox" type="checkbox" unchecked>            <h1 class="mdl-mega-footer__heading">Mobile App</h1>            <ul class="mdl-mega-footer__link-list">              <li><a href="#"><img src="/pwa-images/get_gplay.png" border="0" alt=""></a></li>            </ul>          </div>          <div class="mdl-mega-footer__drop-down-section">            <input class="mdl-mega-footer__heading-checkbox" type="checkbox" unchecked>            <h1 class="mdl-mega-footer__heading">Contact Us</h1>            <ul class="mdl-mega-footer__link-list" style="vertical-align:middle;">              <li><a href="#"><i class="small-material-icons">phone</i> 9876543210</a></li>              <li><a href="#"><i class="small-material-icons">mail</i> hindi@pratilipi.com</a></li>            </ul>          </div>          <div class="mdl-mega-footer__drop-down-section">            <input class="mdl-mega-footer__heading-checkbox" type="checkbox" checked>            <h1 class="mdl-mega-footer__heading">About</h1>            <ul class="mdl-mega-footer__link-list">              <li><a href="#">About Us</a></li>              <li><a href="#">Careers</a></li>              <li><a href="#">Privacy policy</a></li>              <li><a href="#">Terms of Service</a></li>            </ul>          </div>          <div class="mdl-mega-footer__drop-down-section">            <input class="mdl-mega-footer__heading-checkbox" type="checkbox" checked>            <h1 class="mdl-mega-footer__heading">Follow us</h1>            <ul class="mdl-mega-footer__link-list">              <li><a href="#">Facebook</a></li>              <li><a href="#">Twitter</a></li>              <li><a href="#">Google Plus</a></li>              <li><a href="#">LinkedIn</a></li>            </ul>          </div>        </div>        <div class="mdl-mega-footer__bottom-section">          <div class="mdl-logo"> &copy; 2015-2016 Nasadiya Tech. Pvt. Ltd.</div>        </div>     </footer>'

});

ko.components.register('pratilipi-navigation', {
	viewModel: function() {
    this.navigationList = ko.observableArray([]);
    this.pushToNavigationList = function( navList ) {
      for( var i=0; i< navList.length; i++ ) {
        this.navigationList.push( navList[i] );
      }
    }
    var self = this;
    this.getNavigationList = function() {
      $.ajax({
        type: 'get',
        url: 'http://hindi.gamma.pratilipi.com/api/navigation/list?language=HINDI',
        success: function( response ) {
//          var res = jQuery.parseJSON( response );
          self.pushToNavigationList( response["navigationList"] ); 
        },
        error: function( response ) {
            console.log( response );
            console.log( typeof(response) );
        }
      });
    };
    this.getNavigationList();
},
    template: '<div class="mdl-layout__drawer pratilipi-navigation">    <span class="mdl-layout-title">Title</span>    <nav class="mdl-navigation" data-bind="visible: navigationList().length > 0">	    <!-- ko foreach: navigationList -->	        <h6 data-bind="text: title"></h6>	            <!-- ko foreach: linkList -->			        <a class="mdl-navigation__link" data-bind="attr: { href: url }, text: name">Link 1</a>			    <!-- /ko -->	    <!-- /ko -->                                      </nav></div>'

});

ko.components.register('pratilipi-navigation-aside', {
	viewModel: function() {
    this.navigationList = ko.observableArray([]);
    this.pushToNavigationList = function( navList ) {
      for( var i=0; i< navList.length; i++ ) {
        this.navigationList.push( navList[i] );
      }
    }
    var self = this;
    this.getNavigationList = function() {
      $.ajax({
        type: 'get',
        url: 'http://hindi.gamma.pratilipi.com/api/navigation/list?language=HINDI',
        success: function( response ) {
//          var res = jQuery.parseJSON( response );
          self.pushToNavigationList( response["navigationList"] ); 
        },
        error: function( response ) {
            console.log( response );
            console.log( typeof(response) );
        }
      });
    };
    this.getNavigationList();
},
    template: '<aside class="mdl-components__nav mdl-shadow--4dp">     <!-- ko foreach: navigationList -->     	<h6 data-bind="text: title"></h6>     	<!-- ko foreach: linkList -->       		<a data-bind="attr: { href: url }, text: name"></a>		<!-- /ko -->	<!-- /ko -->         		</aside>'

});

ko.components.register('pratilipi-info', {
	viewModel: function() {    
    this.initializeData = function() {
        this.id = getQueryVariable("id");
        this.navigationList = ko.observableArray([]);
        this.title = ko.observable();
        this.titleEn = ko.observable();
        this.coverImageUrl = ko.observable();
        this.author_name = ko.observable();
        this.language = ko.observable();
        this.summary = ko.observable();
        this.state = ko.observable();
        this.publish_date = ko.observable();
        this.averageRating = ko.observable();
        this.ratingCount = ko.observable();
        this.readCount = ko.observable();
        this.type = ko.observable();
    }

    
    this.pushToViewModel = function( data ) {
        this.title(data["title"]).titleEn(data["titleEn"]).coverImageUrl("https://d3cwrmdwk8nw1j.cloudfront.net/pratilipi/cover?pratilipiId=6243354113212416&version=1453103809428&width=150").author_name(data.author.name).language(data["language"]).summary(data["summary"]).state(data["state"]).publish_date(data["listingDateMillis"]).averageRating(data["averageRating"]).ratingCount(data["ratingCount"]).readCount(data["readCount"]).type(data["type"]);
    }
    var self = this;
    this.getData = function() {
      $.ajax({
        type: 'get',
//        url: '/api/pratilipi?_apiVer=2&pratilipiId='+ self.id,
        url: 'http://hindi.gamma.pratilipi.com/api/pratilipi?_apiVer=2&pratilipiId=' + self.id,
        data: { 
            // 'language': "HINDI"
        },
        success: function( response ) {
//          var res = jQuery.parseJSON( response );
          self.pushToViewModel( response );
        },
        error: function( response ) {
          console.log( response );
          console.log( typeof(response) );
        }
      });
    };
    
    this.init = function() {
      this.initializeData();
      this.getData();
    }
    
    this.init();
},
    template: '<div class="mdl-shadow--2dp mdl-cell mdl-cell--8-col-tablet mdl-cell--9-col">    <div class="mdl-grid">        <div class="mdl-card__media mdl-cell mdl-cell--4-col-phone mdl-cell--3-col-tablet mdl-cell--4-col-desktop">            <img data-bind="attr: { src: coverImageUrl }" border="0" alt="" style="padding:10px;display:block;margin:auto;">        </div>        <div class="mdl-cell mdl-cell--4-col-phone mdl-cell--5-col-tablet mdl-cell--8-col-desktop">            <div class="mdl-card__title">                <h2 class="mdl-card__title-text" data-bind="text: title"></h2>            </div>            <div class="css-author-name mdl-card__title">                <h5 style="margin:0;" data-bind="text: author_name"></h5>            </div>            <div class="mdl-card__supporting-text">                <!--ko text: averageRating -->                <!--/ko-->                <div class="icon icon-ic_queue_music_black_24dp" style="vertical-align: middle;display: inline-block;"> </div> (                <!--ko text: ratingCount -->                <!--/ko-->                ) &nbsp;                <!--ko text: readCount -->                <!--/ko--><div class="icon icon-ic_queue_music_black_24dp" style="vertical-align: middle;display: inline-block;"> </div>            </div>            <div class="mdl-card__actions">                <button class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect">                    Read                </button>                <button class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect">                    + Library                </button>                <button class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect">                    <div class="icon icon-ic_queue_music_black_24dp"> </div>                </button>            </div>            <div class="mdl-card__supporting-text">                Published:                <!--ko text: publish_date -->                <!--/ko-->                <br> Type:                <!--ko text: type -->                <!--/ko-->            </div>        </div>  <div class="mdl-cell mdl-cell--12-col padding-zero ">      <p></p>      <hr/>  </div>  <h3 class="mdl-cell mdl-cell--12-col mdl-typography--headline">Summary</h3>  <div class="mdl-cell mdl-cell--12-col mdl-card__supporting-text padding-zero ">      <p class="see-more-text" data-bind="text: summary">      </p>      <div style="text-align:center;">                <button class="mdl-button mdl-js-button mdl-button--accent mdl-js-ripple-effect">                    See More                </button>                </div>                <hr/>            </div>             <h3 class="mdl-cell mdl-cell--12-col mdl-typography--headline">About the Author</h3><div class="mdl-cell mdl-cell--12-col" style="display: flex;align-items: center;justify-content: space-between;"><span style="display: flex;align-items: center;"><i class="material-icons mdl-list__item-avatar">person</i>  	<span style="margin: 10px;font-weight: 700;" data-bind="text: author_name"></span>    </span>	<button class="mdl-button mdl-js-button mdl-button--primary mdl-layout--large-screen-only">		Follow	</button>	<button class="mdl-button mdl-js-button mdl-button--icon mdl-button--colored mdl-layout--small-screen-only">	  	<i class="material-icons">person_add</i>	</button></div>            <div class="mdl-cell mdl-cell--12-col mdl-card__supporting-text padding-zero ">                <p class="see-more-text">                    Excepteur reprehenderit sint exercitation ipsum consequat qui sit id velit elit. Velit anim eiusmod labore sit amet. Voluptate voluptate irure occaecat deserunt incididunt esse in. Sunt velit aliquip sunt elit ex nulla reprehenderit qui ut eiusmod ipsum do. Duis veniam reprehenderit laborum occaecat id proident nulla veniam. Duis enim deserunt voluptate aute veniam sint pariatur exercitation. Irure mollit est sit labore est deserunt pariatur duis aute laboris cupidatat. Consectetur consequat esse est sit veniam adipisicing ipsum enim irure.                </p>                <hr/>            </div>               </div>          </div>'

});

ko.components.register('pratilipi-review-list', {
	viewModel: function() {
    this.reviewList = ko.observableArray([]);
    this.pratilipiId = getQueryVariable( "id" );
    this.pushToReviewList = function( revList ) {
      for( var i=0; i< revList.length; i++ ) {
        this.reviewList.push( revList[i] );
      }
    }
    var self = this;
    this.getReviewList = function() {

      $.ajax({
        type: 'get',
        url: 'http://hindi.gamma.pratilipi.com/api/userpratilipi/review/list?pratilipiId=' + self.pratilipiId + "&resultCount=3",
        success: function( response ) {
//          var res = jQuery.parseJSON( response );
          self.pushToReviewList( response["reviewList"] ); 
        },
        error: function( response ) {
            console.log( response );
            console.log( typeof( response ) );
        }
      });
    };
    this.getReviewList();
},
    template: '<div class="mdl-shadow--2dp mdl-cell mdl-cell--8-col-tablet mdl-cell--9-col">    <div class="mdl-grid">		<h3 class="mdl-cell mdl-cell--12-col mdl-typography--headline">Reviews</h3>        <div class="mdl-cell mdl-cell--12-col mdl-card__supporting-text padding-zero " data-bind="visible: reviewList().length > 0">			<ul class="demo-list-three mdl-list" data-bind="foreach: reviewList">				<li class="mdl-list__item mdl-list__item--three-line height-auto padding-8 display-block">					<span class="mdl-list__item-primary-content height-auto">					  	<i class="material-icons mdl-list__item-avatar">person</i>					  	<a class="reviewer-name" data-bind="attr: { href: userProfilePageUrl }, text: user.displayName"></a>					  	<a class="mdl-list__item-secondary-action pull-right" href="#"><i class="material-icons material-icons-16">star</i><i class="material-icons material-icons-16">star</i><i class="material-icons material-icons-16">star</i><i class="material-icons material-icons-16">star</i><i class="material-icons material-icons-16">star</i></a>				  		<span class="mdl-list__item-text-body height-auto" data-bind="text: review">				  		</span>						  							</span>					<div class="margin-top-15 font-14">						<span class="">							<!-- ko if: likeCount -->								<span data-bind="text: likeCount"></span>							 <!-- /ko --> 							<i class="material-icons material-icons-16 vertical-middle">thumb_up</i>							<i class="material-icons material-icons-16 reply vertical-middle">message</i>							<!-- ko if: commentCount -->								<span class="reply">View all replies</span>							<!-- /ko -->													</span>						<span class="pull-right">							1 Nov 2016						</span>					</div>									</li>				<hr />														</ul>	        </div>    </div></div>'

});    </script>	
</head>

<body>
    <!-- http://10.ptlp.co/pratilipi/cover?width=150 -->
    <div class="demo-layout-transparent mdl-layout mdl-js-layout">
    	<pratilipi-header></pratilipi-header>

        <main class="mdl-layout__content">
        	<div class="mdl-components mdl-js-components mdl-cell mdl-cell--12-col">
				<pratilipi-navigation-aside class="mdl-layout--large-screen-only"></pratilipi-navigation-aside>
	            <div class="mdl-grid">
					<pratilipi-info></pratilipi-info>	
					<pratilipi-review-list></pratilipi-review-list>    	                                                       
            	</div>
            </div>
            <pratilipi-footer></pratilipi-footer>	
        </main>
    </div>
    <script src="/summary.js?4"></script>

</body>
</html>
 
